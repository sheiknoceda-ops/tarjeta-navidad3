<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Enviar</title>
    <link rel="stylesheet" href="style.css">

    <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
    <script>
        (function() {
            emailjs.init("quxxlveFyKB7vkEpy"); 
        })();
    </script>

    <style>
        .preview-container{
            width:100%;
            height:220px;
            margin-top:15px;
            border-radius:20px;
            overflow:hidden;
            border:4px solid #006400;
            background:#ddd;
            display:flex;
            justify-content:center;
            align-items:center;
            text-align:center;
            padding:10px;
        }

        .texto-preview{
            font-size:20px;
            font-weight:bold;
            color:#b30000;
            white-space: pre-wrap;
        }
    </style>
</head>

<body class="centrado">
    <div class="card">
        <h2>Enviar Saludo</h2>

        <div class="preview-container">
            <div id="vistaTarjeta" class="texto-preview">
                Tu mensaje aparecerá aquí
            </div>
        </div>

        <input type="email" id="correo" placeholder="Ingrese Correo">

        <button onclick="enviar()">Enviar</button>

        <p id="confirmacion" style="margin-top:10px; font-weight:bold;"></p>

        <a href="tarjeta.html" class="btn">⬅️ Regresar</a>
    </div>

    <script>
        const mensaje = localStorage.getItem("mensajeTarjeta");
        if (mensaje) {
            document.getElementById("vistaTarjeta").innerText = mensaje;
        }

        function enviar() {
            const correo = document.getElementById("correo").value;
            const tarjeta = document.getElementById("vistaTarjeta").innerText;

            if (correo === "") {
                alert("Ingrese un correo válido");
                return;
            }

            const params = {
                correoDestino: correo,
                contenidoTarjeta: tarjeta,
            };

            emailjs
                .send("service_is24smn", "template_tqqq0xh", params)
                .then(() => {
                    document.getElementById("confirmacion").innerText =
                        "✅ Saludo enviado correctamente";
                })
                .catch(() => {
                    alert("Error al enviar. Revisa tu EmailJS.");
                });
        }

        document.getElementById("correo").addEventListener("keydown", function(event) {
            if (event.key === "Enter") {
                enviar();
            }
        });
    </script>
</body>
</html>

